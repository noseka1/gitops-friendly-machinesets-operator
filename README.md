# GitOps-Friendly MachineSets Operator

This operator allows the user to manage MachineSets without the need to supply the cluster-specific infrastructure name. Infrastructure name is unique to the OpenShift cluster. It is generated by the OpenShift installer and is not known prior to the cluster installation. This operator injects the infrastructure name into MachineSets automatically.

## Building Container Images

Set the version you want to build. See `git tag` for available versions:

```
$ VERSION=0.1.0
```

Set the custom image name. Replace the image name below with your own:

```
$ IMG=quay.io/noseka1/gitops-friendly-machinesets-operator:$VERSION
$ IMAGE_TAG_BASE=quay.io/noseka1/gitops-friendly-machinesets-operator
```

Build operator image:

```
$ make docker-build IMG=$IMG
```

Push the finished operator image to the image registry:

```
$ podman push $IMG
```

Generate operator bundle artifacts:

```
$ make bundle IMG=$IMG CHANNELS=stable DEFAULT_CHANNEL=stable
```

Build bundle container image:

```
$ make bundle-build IMAGE_TAG_BASE=$IMAGE_TAG_BASE
```

Push bundle image to registry:

```
$ podman push $IMAGE_TAG_BASE-bundle:v$VERSION
```

Build catalog container image:

```
$ make catalog-build IMAGE_TAG_BASE=$IMAGE_TAG_BASE
```

Push catalog image to registry:

```
$ podman push $IMAGE_TAG_BASE-catalog:v$VERSION
```
